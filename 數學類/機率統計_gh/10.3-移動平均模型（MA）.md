### 10.3 移動平均模型（MA）

移動平均模型（Moving Average Model，簡稱 MA）是時間序列分析中的一種基於過去誤差的統計模型。它主要描述時間序列中的當前觀察值如何受到過去誤差項的影響。與自迴歸模型（AR）主要關注過去觀測值的影響不同，移動平均模型則專注於過去誤差項的影響。

#### 10.3.1 移動平均模型的基本概念

在移動平均模型中，當前的觀測值  $`y_t`$  被表示為過去誤差項的加權平均，並加上一個隨機誤差項。具體的數學表達式為：


```math
y_t = \mu + \epsilon_t + \theta_1 \epsilon_{t-1} + \theta_2 \epsilon_{t-2} + \dots + \theta_q \epsilon_{t-q}
```


其中：
-  $`y_t`$  為時間  $`t`$  的觀測值。
-  $`\mu`$  是常數項（如果有的話），代表長期的平均值。
-  $`\epsilon_t`$  是隨機誤差項，通常假設為白噪聲（均值為零、方差穩定、無自相關的隨機過程）。
-  $`\theta_1, \theta_2, \dots, \theta_q`$  是模型的移動平均係數（MA 係數）。
-  $`q`$  是移動平均模型的階數，表示使用多少個過去的誤差項來解釋當前的數據。

#### 10.3.2 移動平均模型的階數選擇

與 AR 模型類似，MA 模型的階數  $`q`$  也是一個重要的超參數，決定了模型中所考慮的過去誤差項的數量。選擇合適的階數  $`q`$  是關鍵的，通常可以通過以下方法來確定：
- **ACF（自相關函數）圖**：對於 MA 模型，ACF 在某一階數之後會迅速下降。這個下降的階數通常與 MA 模型的階數  $`q`$  相符。
- **信息準則**：例如 AIC 或 BIC，也可用於比較不同階數下的模型，選擇最佳的階數。

#### 10.3.3 移動平均模型的估計

在 MA 模型中，我們需要估計模型的參數（即 MA 係數  $`\theta_1, \theta_2, \dots, \theta_q`$ ）。這些參數通常使用最小二乘法（OLS）或最大似然估計法（MLE）進行估計。估計步驟與 AR 模型相似，具體步驟如下：
1. 設定模型的階數  $`q`$ 。
2. 通過最小二乘法或最大似然估計法計算 MA 係數。
3. 驗證模型的適配度，檢查殘差項是否符合白噪聲假設。

#### 10.3.4 移動平均模型的預測

在 MA 模型中，預測未來的數據點是基於過去誤差項的加權平均。具體的預測公式如下：


```math
\hat{y}_{t+1} = \mu + \theta_1 \epsilon_t + \theta_2 \epsilon_{t-1} + \dots + \theta_q \epsilon_{t-q+1}
```


這裡，  $`\hat{y}_{t+1}`$  是對未來值  $`y_{t+1}`$  的預測，利用過去的誤差項來進行預測。

#### 10.3.5 移動平均模型的特點與優勢

- **簡單性與直觀性**：MA 模型相對簡單且直觀，適合描述誤差對未來數據的影響。
- **能夠捕捉隨機波動**：MA 模型非常適合捕捉隨機波動或噪聲，特別是當時間序列的波動主要來自隨機誤差時。
- **計算效率**：MA 模型的計算較為簡便，並且在許多情況下能夠提供準確的預測。

#### 10.3.6 移動平均模型的局限性

- **無法捕捉長期依賴性**：MA 模型僅考慮了過去  $`q`$  期的誤差項，因此它無法捕捉時間序列中的長期依賴性。
- **對非平穩序列的處理有限**：與 AR 模型一樣，MA 模型對非平穩時間序列的處理也有限，需要對數據進行差分或其他變換。
- **依賴於誤差項的假設**：MA 模型的預測依賴於誤差項的假設，即假設誤差項是白噪聲。如果這個假設不成立，則模型可能無法有效預測。

#### 10.3.7 小結

移動平均模型（MA）是時間序列分析中的一個重要工具，尤其適合描述誤差項對時間序列的影響。MA 模型能夠捕捉隨機波動，並且計算簡單高效。然而，由於其只關注誤差項，對於長期依賴性和非平穩數據的處理較為有限，因此需要根據具體情況選擇合適的模型來進行時間序列分析。