### 19. **蒙地卡羅樹搜尋 MCTS**

#### 選擇策略與子節點的選擇

在蒙地卡羅樹搜尋（MCTS）的選擇步驟中，選擇策略扮演著至關重要的角色。該策略決定了在每次迭代中，從當前的根節點開始，如何選擇一條路徑來進行探索。選擇策略的目的是在探索和開發之間取得平衡，從而有效地收集有價值的樣本來做出最佳決策。

以下是常見的選擇策略和子節點選擇的詳細說明：

1. **上限置信區間（UCB，Upper Confidence Bound）策略**
   - 上限置信區間（UCB）是MCTS中最常用的選擇策略之一。其目的是在探索（試探未知）和開發（選擇已有的最佳選項）之間達到平衡。
   - 在UCB策略中，每個節點會根據以下公式來計算其UCB值，然後選擇UCB值最大的子節點：
     
```math
UCB = \overline{X}_i + C \sqrt{\frac{\ln N}{n_i}}
```

     其中：
     -  $`\overline{X}_i`$  是節點  $`i`$  的平均回報。
     -  $`N`$  是父節點的總模擬次數。
     -  $`n_i`$  是節點  $`i`$  被選中的次數。
     -  $`C`$  是控制探索程度的常數。較大的  $`C`$  值促使更多的探索，較小的  $`C`$  值促使更多的開發。
   
   - 這種策略有助於平衡探索那些尚未充分探索的節點和開發那些已經顯示出較好回報的節點。選擇的節點將具有較高的潛力，無論是基於過去的表現還是未來的潛在收益。

2. **ε-貪婪策略（ε-greedy）**
   - ε-貪婪策略是另一種簡單的選擇策略，其中大部分時間都選擇當前回報最好的節點（貪婪策略），但偶爾也會選擇隨機節點進行探索（隨機選擇策略）。
   - 這樣的策略有助於保持對未知節點的探索，避免陷入局部最優解。具體地，ε-貪婪策略在每次選擇時，選擇最佳節點的概率為  $`1 - \epsilon`$ ，選擇隨機節點的概率為  $`\epsilon`$ ，其中  $`\epsilon`$  是一個小的正數，通常設為0.1或更小。

3. **最大獎勳策略（MaxReward Strategy）**
   - 最大獎勳策略選擇最大化當前已知回報的節點。在這種策略下，每個節點的選擇是基於其已經模擬結果的回報，通常會選擇回報最高的節點進行擴展。這種策略適用於那些已經有明確回報評價的問題，並且希望快速收斂於最佳解。

4. **隨機選擇（Random Selection）**
   - 隨機選擇策略會隨機選擇子節點來進行探索。這通常不會對解決問題產生太多幫助，但有時在處理多樣化搜索空間時，隨機選擇有助於避免過度專注於某一小部分，從而促進更全面的探索。

5. **子節點選擇**
   - 在每個節點上，選擇哪個子節點來繼續進行搜索，是選擇策略中的關鍵部分。根據不同的選擇策略，子節點的選擇會有所不同。例如，在UCB策略中，子節點的選擇是根據計算出的UCB值來決定的；而在ε-貪婪策略中，選擇則是基於某種概率分佈來進行的。
   
   - 此外，子節點的選擇會受到當前狀態的影響。如果狀態空間很大或者需要考慮動態變化，則選擇過程也可能包含一些狀態特定的策略或約束條件。

### 小結
選擇策略的核心目的是引導搜索過程，選擇最有可能帶來最大回報的節點進行擴展。選擇策略的有效性會直接影響MCTS的性能，特別是在處理大規模、複雜的搜索空間時。因此，根據問題的具體需求，選擇適合的選擇策略非常重要。