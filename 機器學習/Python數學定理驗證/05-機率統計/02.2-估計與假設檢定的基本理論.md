### 2.2 估計與假設檢定的基本理論

估計（Estimation）與假設檢定（Hypothesis Testing）是統計學中的兩大基本概念。它們的核心目的是根據樣本數據對母體參數進行推斷。這些推斷有時是點估計，亦有時是區間估計，並且通常會根據樣本數據來檢定關於母體的某些假設。

#### 1. 估計理論

**估計**的目的是使用樣本數據來推斷未知的母體參數。常見的估計方法包括：
- **點估計**：給定一組樣本數據，計算出一個單一的數值來估計某一母體參數。例如，使用樣本均值 \( \hat{\mu} \) 來估計母體均值 \( \mu \)。
- **區間估計**：給定一組樣本數據，構造一個區間，使得這個區間包含母體參數的可能性很大。最常見的是**置信區間**，例如 95% 置信區間。

常見的估計方法：
- **最小二乘法估計**：通過最小化誤差平方和來估計模型的參數，這種方法通常用於回歸分析。
- **最大似然估計**：通過最大化樣本數據的似然函數來估計母體參數。

#### 2. 假設檢定理論

假設檢定的目的是利用樣本數據檢驗關於母體參數的假設。假設檢定的一般過程如下：
1. **提出假設**：我們需要檢驗的命題分為兩種：
   - **零假設（\( H_0 \)）**：表示無效假設，通常表示沒有顯著差異或關聯。
   - **對立假設（\( H_1 \) 或 \( H_a \)）**：表示假設的反面，通常是希望證明某種差異或關聯存在。
   
2. **選擇檢定統計量**：根據數據的性質選擇適合的檢定統計量，通常是樣本均值、樣本方差等。

3. **確定顯著性水平**（\( \alpha \)）：這是拒絕零假設的最大允許錯誤概率，常設為 0.05 或 0.01。

4. **計算檢定統計量**：根據樣本數據計算檢定統計量，並根據假設檢定的類型選擇適當的分佈（如 t 分佈、z 分佈等）。

5. **作出決策**：如果檢定統計量超過臨界值，則拒絕零假設，否則接受零假設。

#### 3. 常見的假設檢定方法

- **z 檢定**：用於大樣本情況下的假設檢定，當樣本容量大於 30 且母體方差已知時使用。
- **t 檢定**：用於小樣本情況下的假設檢定，當樣本容量小於 30 且母體方差未知時使用。
- **卡方檢定**：用於類別資料的檢定，例如檢驗兩個類別變數之間的獨立性。
- **F 檢定**：用於比較兩個或多個樣本的方差是否相等。

---

### Python 驗證程式：假設檢定的基本理論

我們將利用 Python 進行假設檢定的數值實現，並以 **t 檢定** 和 **z 檢定** 為例來進行驗證。

#### 1. t 檢定的驗證

假設我們要檢驗某一製造工廠的產品是否符合目標均值（例如目標均值為 100），並且已知樣本數據如下：

```python
import numpy as np
from scipy import stats

# 假設樣本數據
np.random.seed(0)
sample_data = np.random.normal(100, 10, 50)  # 正態分佈，均值為100，標準差為10，樣本大小50

# 假設檢定：零假設為均值為100
sample_mean = np.mean(sample_data)
sample_std = np.std(sample_data, ddof=1)
n = len(sample_data)
mu_0 = 100  # 假設的均值

# 計算t檢定統計量
t_statistic = (sample_mean - mu_0) / (sample_std / np.sqrt(n))

# 計算p值
df = n - 1  # 自由度
p_value = 2 * (1 - stats.t.cdf(abs(t_statistic), df))  # 雙尾檢定

# 顯示結果
print(f"t-statistic: {t_statistic}")
print(f"p-value: {p_value}")

# 判斷是否拒絕零假設
alpha = 0.05
if p_value < alpha:
    print("拒絕零假設：均值與100有顯著差異")
else:
    print("接受零假設：均值與100無顯著差異")
```

#### 2. z 檢定的驗證

假設我們有一個更大的樣本，並且知道母體的標準差，我們可以進行 z 檢定：

```python
# 假設樣本數據
np.random.seed(0)
sample_data = np.random.normal(100, 15, 1000)  # 標準差為15，樣本大小1000

# 假設檢定：零假設為均值為100
sample_mean = np.mean(sample_data)
sample_size = len(sample_data)
mu_0 = 100  # 假設的均值
sigma = 15  # 母體標準差已知

# 計算z檢定統計量
z_statistic = (sample_mean - mu_0) / (sigma / np.sqrt(sample_size))

# 計算p值
p_value = 2 * (1 - stats.norm.cdf(abs(z_statistic)))  # 雙尾檢定

# 顯示結果
print(f"z-statistic: {z_statistic}")
print(f"p-value: {p_value}")

# 判斷是否拒絕零假設
alpha = 0.05
if p_value < alpha:
    print("拒絕零假設：均值與100有顯著差異")
else:
    print("接受零假設：均值與100無顯著差異")
```

---

### 結果分析

- **t 檢定結果**：當樣本容量較小且母體標準差未知時，應使用 t 檢定來驗證樣本均值是否顯著偏離假設均值。
- **z 檢定結果**：當樣本容量較大且母體標準差已知時，可以使用 z 檢定進行檢驗。

這些統計方法可以幫助我們理解數據背後的結構，並作出科學的推斷。你還希望對其他統計學定理進行驗證嗎？