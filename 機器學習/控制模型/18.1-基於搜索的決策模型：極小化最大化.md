### 18.1 基於搜索的決策模型：極小化最大化

在棋類遊戲的控制理論中，極小化最大化（Minimax）算法是一個經典且關鍵的決策模型。它是基於搜尋的決策過程，旨在幫助玩家（或智能體）在一個零和博弈中選擇最佳的行動策略。這一算法特別適用於兩方對抗的棋類遊戲，例如國際象棋、圍棋和井字遊戲等，能夠讓玩家通過評估所有可能的局面來做出最優的決策。

#### 1. 極小化最大化算法概述

極小化最大化算法是一種回溯法，通過模擬對手的最優策略，來確定自己的最優行動。該算法的核心思想是：
- **最大化玩家的回報**：假設玩家是希望最大化其最終得分（或最小化對手的得分）。
- **最小化對手的回報**：對手也會選擇最優行動，這意味著玩家需要預測並對抗對手的策略。

具體來說，該算法會構建一個遊戲樹，這個樹的每一個節點代表一個可能的遊戲局面，邊則代表可能的動作。從每個節點開始，玩家選擇能夠最大化其回報的行動，而對手則會選擇能最小化玩家回報的行動。

#### 2. 遊戲樹結構

極小化最大化算法的實現依賴於構建遊戲樹。遊戲樹是描述所有可能局面的結構，每個節點表示遊戲中的一個狀態，而每條邊代表從一個狀態到另一個狀態的轉換。遊戲樹的根節點是當前遊戲的狀態，子節點則是每一步行動後可能的局面。

**遊戲樹的層級**：
- **層級1**：玩家的回合（最大化玩家）。
- **層級2**：對手的回合（最小化對手）。
- 隨著遊戲的進行，樹會不斷地向下展開，直到達到終局或最大深度。

#### 3. 最佳決策過程

極小化最大化算法的目的是確定從當前局面開始，選擇一條最佳的行動路徑。其具體過程可以分為以下步驟：
1. **構建遊戲樹**：從當前局面出發，構建出可能的局面樹，直到達到終局或預定的搜索深度。
2. **遞歸計算節點值**：從葉節點（終局狀態）開始，根據結果評分回傳至根節點。葉節點的值由遊戲的終局結果決定，通常使用評估函數來打分。接著，根據極小化最大化規則向上推算：
   - 如果是最大化玩家的回合，則選擇子節點中分數最大的那一個。
   - 如果是最小化玩家的回合，則選擇分數最小的那一個。
3. **選擇最佳行動**：最終，在根節點處，最大化玩家選擇使其評分最大的行動，這就是最優策略。

#### 4. 剪枝技術：α-β剪枝

極小化最大化算法的計算量隨著遊戲樹深度的增長而指數增長，因此需要進行優化。α-β剪枝是一種常見的技術，用來減少需要評估的節點數量，從而提高算法的效率。

**α-β剪枝的基本思想**是，在搜尋過程中，如果已經存在一個更好的選擇（即一個分數更高的分支），則可以剪掉不再需要的子樹，從而避免無謂的計算。具體來說：
- **α值**：表示最大化玩家目前的最優選擇。
- **β值**：表示最小化玩家目前的最優選擇。
當α值大於或等於β值時，這條分支的其餘部分可以被剪去，因為它不會影響最終的選擇。

#### 5. 應用範例

- **國際象棋**：在國際象棋中，極小化最大化算法可以用來決定最佳的走法。通過構建遊戲樹，並根據對手的反應選擇最合適的策略，玩家可以達到對抗對手的最優效果。
- **圍棋**：圍棋作為一個計算複雜度極高的遊戲，極小化最大化算法的應用需要極其強大的計算資源。在圍棋中，遊戲樹的深度非常大，因為每一步的選擇都會產生大量的可能變化，因此需要依賴剪枝技術來提高搜索效率。
- **井字遊戲**：井字遊戲是一個簡單的例子，極小化最大化算法在這裡的應用可以非常高效地找到最佳策略，因為遊戲樹的深度較小。

#### 6. 挑戰與限制

- **計算複雜度**：隨著遊戲規模的增大，極小化最大化算法的計算量迅速增長。這是因為遊戲樹的節點數量呈指數增長，對計算資源的要求極高。
- **策略評估的準確性**：在某些遊戲中，遊戲結束並不總是有明確的勝敗結果，因此如何設計合適的評估函數來為非終局狀態賦值是一個挑戰。評估函數的準確性直接影響到最終的決策質量。
- **深度問題**：對於一些深度較大的遊戲，如圍棋，極小化最大化算法可能無法在有限的時間內進行有效搜索。需要用到更多的啟發式策略和優化技術，如蒙特卡羅樹搜索（MCTS）等。

#### 7. 結論

極小化最大化算法是一種基於搜尋的決策模型，它通過評估所有可能的局面並根據對手行為進行預測來選擇最優策略。儘管面臨計算複雜度和策略評估等挑戰，但極小化最大化算法仍然是棋類遊戲中最基本且最有效的決策工具之一。在現代強化學習和人工智能領域，這一算法的應用不僅限於棋類遊戲，還可擴展到多智能體系統和其他對抗性問題中。